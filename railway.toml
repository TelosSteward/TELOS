[build]
builder = "NIXPACKS"
buildCommand = "pip install -r requirements.txt && python3 -c \"from sentence_transformers import SentenceTransformer; SentenceTransformer('sentence-transformers/all-MiniLM-L6-v2'); SentenceTransformer('sentence-transformers/all-mpnet-base-v2'); print('Models cached!')\""

[deploy]
startCommand = "streamlit run telos_observatory/main.py --server.port $PORT --server.address 0.0.0.0"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
